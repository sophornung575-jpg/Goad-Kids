<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GOAT KIDS Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{box-sizing:border-box;font-family:Segoe UI,system-ui}
body{margin:0;background:#f6f7f9;color:#333}
header{background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.1);position:sticky;top:0;z-index:10}
.container{max-width:1200px;margin:auto;padding:20px}
.flex{display:flex;align-items:center;justify-content:space-between}
.logo{font-size:22px;font-weight:bold}
nav a,nav button{margin-right:10px;text-decoration:none;color:#555;font-weight:600;background:none;border:none;cursor:pointer}
nav a.active{color:#FF6B35}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px}
.card{background:#fff;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,.08);overflow:hidden}
.card img{width:100%;height:180px;object-fit:cover}
.card-body{padding:15px}
.price{color:#FF6B35;font-weight:bold}
.stock{font-size:13px;margin:6px 0}
.btn{padding:8px 14px;border:none;border-radius:6px;cursor:pointer;font-weight:600}
.btn-orange{background:#FF6B35;color:#fff}
.btn-blue{background:#4A90E2;color:#fff}
.btn-red{background:#dc3545;color:#fff}
.btn-outline{background:none;border:1px solid #ccc}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:20px}
.stat{background:#fff;padding:15px;border-radius:10px;text-align:center}
.stat h2{color:#FF6B35;margin:5px 0}
.hidden{display:none}
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #eee;text-align:left}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center}
.modal-content{background:#fff;padding:25px;border-radius:10px;width:90%;max-width:500px}
input{width:100%;padding:8px;margin-bottom:10px}
.cart-item{display:flex;justify-content:space-between;margin-bottom:8px}
</style>
</head>

<body>

<header>
<div class="container flex">
<div class="logo">G GOAT KIDS</div>
<nav>
<a onclick="showStore()" id="storeLink" class="active">Store</a>
<a onclick="showAdmin()" id="adminLink" class="hidden">Admin</a>
<button onclick="openCart()">ðŸ›’ Cart (<span id="cartCount">0</span>)</button>
</nav>
</div>
</header>

<div class="container">

<!-- STORE -->
<section id="store">
<div class="stats">
<div class="stat"><h2 id="totalProducts">0</h2><p>Products</p></div>
<div class="stat"><h2 id="lowStock">0</h2><p>Low Stock</p></div>
<div class="stat"><h2 id="totalStock">0</h2><p>Total Stock</p></div>
<div class="stat"><h2 id="avgPrice">$0</h2><p>Avg Price</p></div>
</div>

<div class="grid" id="productGrid"></div>
</section>

<!-- ADMIN -->
<section id="admin" class="show">
<h2>Admin Panel</h2>

<input id="name" placeholder="Product name">
<input id="price" type="number" placeholder="Price">
<input id="stock" type="number" placeholder="Stock">
<input id="category" placeholder="Category">
<input id="image" placeholder="Image URL">

<button class="btn btn-orange" onclick="addProduct()">Add Product</button>

<h3 style="margin-top:30px">Inventory</h3>
<table>
<thead>
<tr><th>Name</th><th>Price</th><th>Stock</th><th>Action</th></tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<button class="btn btn-red" style="margin-top:20px" onclick="logout()">Logout</button>
</section>

</div>

<!-- LOGIN MODAL -->
<div class="modal" id="loginModal">
<div class="modal-content">
<h3>Admin Login</h3>
<input id="user" value="admin">
<input id="pass" type="password" value="admin123">
<button class="btn btn-blue" onclick="login()">Login</button>
</div>
</div>

<!-- CART MODAL -->
<div class="modal" id="cartModal">
<div class="modal-content">
<h3>Your Cart</h3>
<div id="cartItems"></div>
<h4 id="cartTotal"></h4>
<button class="btn btn-blue" onclick="sendToMessenger()">ðŸ“© Order via Messenger</button>
<button class="btn btn-red" onclick="closeCart()">Close</button>
</div>
</div>

<script>
let products = JSON.parse(localStorage.getItem("products")) || [];
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let isAdmin = localStorage.getItem("admin")==="true";

function save(){
localStorage.setItem("products",JSON.stringify(products));
update();
}
function saveCart(){
localStorage.setItem("cart",JSON.stringify(cart));
updateCartCount();
}
function showStore(){
store.classList.remove("hidden");
admin.classList.add("hidden");
}
function showAdmin(){
if(!isAdmin){loginModal.style.display="flex";return;}
store.classList.add("hidden");
admin.classList.remove("hidden");
}
function login(){
if(user.value==="admin"&&pass.value==="admin123"){
isAdmin=true;
localStorage.setItem("admin","true");
adminLink.classList.remove("hidden");
loginModal.style.display="none";
showAdmin();
}else alert("Wrong login");
}
function logout(){
isAdmin=false;
localStorage.removeItem("admin");
adminLink.classList.add("hidden");
showStore();
}

function addProduct(){
products.push({
id:Date.now(),
name:name.value,
price:+price.value,
stock:+stock.value,
category:category.value,
image:image.value||defaultImg()
});
save();
name.value=price.value=stock.value=category.value=image.value="";
}

function removeProduct(id){
products=products.filter(p=>p.id!==id);
save();
}

function addToCart(id){
const p=products.find(x=>x.id===id);
if(!p||p.stock<=0)return alert("Out of stock");
const item=cart.find(i=>i.id===id);
item?item.qty++:cart.push({id:p.id,name:p.name,price:p.price,qty:1});
saveCart();
alert("Added to cart");
}

function update(){
productGrid.innerHTML="";
tableBody.innerHTML="";
let totalStock=0,totalPrice=0,low=0;

products.forEach(p=>{
totalStock+=p.stock;
totalPrice+=p.price;
if(p.stock>0&&p.stock<=10)low++;

productGrid.innerHTML+=`
<div class="card">
<img src="${p.image}">
<div class="card-body">
<h4>${p.name}</h4>
<div class="price">$${p.price}</div>
<div class="stock">Stock: ${p.stock}</div>
<button class="btn btn-orange" onclick="addToCart(${p.id})">
<i class="fas fa-cart-plus"></i> Add to Cart
</button>
</div>
</div>`;

tableBody.innerHTML+=`
<tr>
<td>${p.name}</td>
<td>$${p.price}</td>
<td>${p.stock}</td>
<td><button class="btn btn-red" onclick="removeProduct(${p.id})">Delete</button></td>
</tr>`;
});

totalProducts.textContent=products.length;
lowStock.textContent=low;
totalStock.textContent=totalStock;
avgPrice.textContent="$"+(products.length?(totalPrice/products.length).toFixed(2):0);
updateCartCount();
}

function updateCartCount(){
cartCount.textContent=cart.reduce((s,i)=>s+i.qty,0);
}

function openCart(){
renderCart();
cartModal.style.display="flex";
}
function closeCart(){cartModal.style.display="none";}

function renderCart(){
let html="",total=0;
cart.forEach(i=>{
total+=i.price*i.qty;
html+=`<div class="cart-item"><span>${i.name} x ${i.qty}</span><span>$${(i.price*i.qty).toFixed(2)}</span></div>`;
});
cartItems.innerHTML=html||"<p>Cart is empty</p>";
cartTotal.textContent="Total: $"+total.toFixed(2);
}

function sendToMessenger(){
if(cart.length===0)return alert("Cart is empty");
let msg="ðŸ›’ New Order%0A%0A";
let total=0;
cart.forEach(i=>{
msg+=`${i.name} x ${i.qty} = $${(i.price*i.qty).toFixed(2)}%0A`;
total+=i.price*i.qty;
});
msg+=`%0AðŸ’° Total: $${total.toFixed(2)}`;
window.open(`https://m.me/YOUR_PAGE_USERNAME?text=${msg}`,"_blank");
cart=[];
saveCart();
closeCart();
}

function defaultImg(){
return "https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=400";
}

if(isAdmin)adminLink.classList.remove("hidden");
update();
</script>

</body>
</html>

