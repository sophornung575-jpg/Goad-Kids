<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Simple Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Segoe UI,system-ui}
body{margin:0;background:#f5f6f8}
header{background:#fff;padding:15px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
.container{max-width:1200px;margin:auto;padding:20px}
.flex{display:flex;justify-content:space-between;align-items:center}
nav button{margin-left:10px;border:none;background:#eee;padding:8px 14px;border-radius:6px;cursor:pointer}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px}
.card{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 4px 10px rgba(0,0,0,.1)}
.card img{width:100%;height:180px;object-fit:cover}
.card-body{padding:12px}
.price{color:#ff6b35;font-weight:bold}
.btn{padding:8px 14px;border:none;border-radius:6px;cursor:pointer}
.btn-orange{background:#ff6b35;color:#fff}
.btn-blue{background:#4a90e2;color:#fff}
.btn-red{background:#e74c3c;color:#fff}
.hidden{display:none}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center}
.modal-content{background:#fff;padding:20px;border-radius:10px;width:90%;max-width:400px}
input{width:100%;padding:8px;margin-bottom:10px}
.cart-item{display:flex;justify-content:space-between;margin-bottom:6px}
</style>
</head>

<body>

<header>
<div class="container flex">
<b>ðŸ›’ My Store</b>
<nav>
<button onclick="openCart()">Cart (<span id="cartCount">0</span>)</button>
<button onclick="openAdmin()">Admin</button>
</nav>
</div>
</header>

<div class="container">

<!-- STORE -->
<section id="store">
<div class="grid" id="productGrid"></div>
</section>

<!-- ADMIN -->
<section id="admin" class="hidden">
<h2>Admin Panel</h2>

<input id="name" placeholder="Product name">
<input id="price" type="number" placeholder="Price">
<input id="stock" type="number" placeholder="Stock">
<input type="file" id="image" accept="image/*">

<button class="btn btn-orange" onclick="addProduct()">Add Product</button>

<h3 style="margin-top:20px">Products</h3>
<table width="100%">
<tbody id="tableBody"></tbody>
</table>

<button class="btn btn-red" onclick="logout()">Logout</button>
</section>

</div>

<!-- LOGIN -->
<div class="modal" id="loginModal">
<div class="modal-content">
<h3>Admin Login</h3>
<input id="user" placeholder="Username" value="admin">
<input id="pass" type="password" placeholder="Password" value="admin123">
<button class="btn btn-blue" onclick="login()">Login</button>
</div>
</div>

<!-- CART -->
<div class="modal" id="cartModal">
<div class="modal-content">
<h3>Your Cart</h3>
<div id="cartItems"></div>
<h4 id="cartTotal"></h4>
<button class="btn btn-blue" onclick="sendOrder()">ðŸ“© Order via Messenger</button>
<button class="btn btn-red" onclick="closeCart()">Close</button>
</div>
</div>

<script>
const PAGE_NAME = "YOUR_PAGE_USERNAME";

let products = JSON.parse(localStorage.getItem("products")) || [];
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let isAdmin = localStorage.getItem("admin")==="true";

function saveProducts(){
localStorage.setItem("products",JSON.stringify(products));
render();
}
function saveCart(){
localStorage.setItem("cart",JSON.stringify(cart));
updateCartCount();
}

function openAdmin(){
if(!isAdmin){loginModal.style.display="flex";return;}
store.classList.add("hidden");
admin.classList.remove("hidden");
}
function login(){
if(user.value==="admin" && pass.value==="admin123"){
isAdmin=true;
localStorage.setItem("admin","true");
loginModal.style.display="none";
openAdmin();
}else alert("Wrong login");
}
function logout(){
isAdmin=false;
localStorage.removeItem("admin");
admin.classList.add("hidden");
store.classList.remove("hidden");
}

function addProduct(){
const file=image.files[0];
if(!file)return alert("Select image");
const reader=new FileReader();
reader.onload=e=>{
products.push({
id:Date.now(),
name:name.value,
price:+price.value,
stock:+stock.value,
image:e.target.result
});
saveProducts();
name.value=price.value=stock.value=image.value="";
};
reader.readAsDataURL(file);
}

function deleteProduct(id){
products=products.filter(p=>p.id!==id);
saveProducts();
}

function addToCart(id){
const p=products.find(x=>x.id===id);
if(!p||p.stock<=0)return alert("Out of stock");
const item=cart.find(i=>i.id===id);
item?item.qty++:cart.push({id:p.id,name:p.name,price:p.price,qty:1});
saveCart();
alert("Added to cart");
}

function render(){
productGrid.innerHTML="";
tableBody.innerHTML="";
products.forEach(p=>{
productGrid.innerHTML+=`
<div class="card">
<img src="${p.image}">
<div class="card-body">
<h4>${p.name}</h4>
<div class="price">$${p.price}</div>
<div>Stock: ${p.stock}</div>
<button class="btn btn-orange" onclick="addToCart(${p.id})">Add to Cart</button>
</div>
</div>`;

tableBody.innerHTML+=`
<tr>
<td>${p.name}</td>
<td>$${p.price}</td>
<td>${p.stock}</td>
<td><button class="btn btn-red" onclick="deleteProduct(${p.id})">Delete</button></td>
</tr>`;
});
updateCartCount();
}

function updateCartCount(){
cartCount.textContent=cart.reduce((s,i)=>s+i.qty,0);
}

function openCart(){
renderCart();
cartModal.style.display="flex";
}
function closeCart(){cartModal.style.display="none";}

function renderCart(){
let html="",total=0;
cart.forEach(i=>{
total+=i.price*i.qty;
html+=`<div class="cart-item"><span>${i.name} x ${i.qty}</span><span>$${(i.price*i.qty).toFixed(2)}</span></div>`;
});
cartItems.innerHTML=html||"<p>Cart is empty</p>";
cartTotal.textContent="Total: $"+total.toFixed(2);
}

function sendOrder(){
if(cart.length===0)return alert("Cart empty");
let msg="ðŸ›’ New Order%0A%0A";
let total=0;
cart.forEach(i=>{
msg+=`${i.name} x ${i.qty} = $${(i.price*i.qty).toFixed(2)}%0A`;
total+=i.price*i.qty;
});
msg+=`%0AðŸ’° Total: $${total.toFixed(2)}`;
window.open(`https://m.me/${PAGE_NAME}?text=${msg}`,"_blank");
cart=[];
saveCart();
closeCart();
}

render();
</script>

</body>
</html>
