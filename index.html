<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goat Kids - Complete Store with Bulk Import</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header & Navigation */
        header {
            background: linear-gradient(135deg, #e44d80 0%, #ff6b9d 100%);
            color: white;
            padding: 15px 0;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 32px;
            font-weight: bold;
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            font-size: 28px;
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
            align-items: center;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .nav-link:hover, .nav-link.active {
            background-color: rgba(255,255,255,0.2);
        }
        
        .cart-icon {
            position: relative;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
        }
        
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ffeb3b;
            color: #333;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            font-size: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }
        
        /* Main Content Tabs */
        .content-tabs {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            color: #666;
            transition: all 0.3s;
        }
        
        .tab-btn:hover {
            color: #e44d80;
        }
        
        .tab-btn.active {
            color: #e44d80;
            border-bottom-color: #e44d80;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Store Page */
        .store-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .store-title {
            font-size: 32px;
            color: #333;
        }
        
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .product-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }
        
        .product-info {
            padding: 20px;
        }
        
        .product-title {
            font-size: 20px;
            margin-bottom: 8px;
            color: #222;
        }
        
        .product-price {
            font-size: 22px;
            color: #e44d80;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .product-stock {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 15px;
        }
        
        .in-stock {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .low-stock {
            background-color: #fff3e0;
            color: #ef6c00;
        }
        
        .out-of-stock {
            background-color: #ffebee;
            color: #c62828;
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .view-btn, .edit-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .view-btn {
            background-color: #e44d80;
            color: white;
        }
        
        .view-btn:hover {
            background-color: #d43d70;
        }
        
        .edit-btn {
            background-color: #f0f0f0;
            color: #333;
        }
        
        .edit-btn:hover {
            background-color: #e0e0e0;
        }
        
        /* Product Detail Page */
        .product-detail-container {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            margin-top: 20px;
        }
        
        .product-detail-image {
            flex: 1;
            min-width: 300px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .product-detail-image img {
            width: 100%;
            height: 400px;
            object-fit: cover;
        }
        
        .product-detail-info {
            flex: 1;
            min-width: 300px;
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .size-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .size-btn {
            padding: 12px 20px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .size-btn:hover {
            border-color: #e44d80;
            color: #e44d80;
        }
        
        .size-btn.selected {
            background-color: #e44d80;
            color: white;
            border-color: #e44d80;
        }
        
        .size-btn.out-of-stock {
            background-color: #f5f5f5;
            color: #aaa;
            border-color: #eee;
            cursor: not-allowed;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 25px 0;
        }
        
        .qty-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .qty-input {
            width: 80px;
            height: 40px;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 500;
        }
        
        .add-to-cart {
            background: linear-gradient(135deg, #e44d80 0%, #ff6b9d 100%);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            margin-top: 20px;
            transition: transform 0.3s;
        }
        
        .add-to-cart:hover {
            transform: translateY(-2px);
        }
        
        .add-to-cart:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Admin Panel */
        .admin-panel {
            background-color: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .inventory-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #e44d80;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #e44d80;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .inventory-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .inventory-table th, .inventory-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .inventory-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #333;
        }
        
        .inventory-table tr:hover {
            background-color: #f9f9f9;
        }
        
        .stock-input {
            width: 80px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
        }
        
        .save-btn, .update-btn, .delete-btn, .bulk-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            margin-right: 5px;
        }
        
        .save-btn, .update-btn, .bulk-btn {
            background-color: #4CAF50;
            color: white;
        }
        
        .delete-btn {
            background-color: #f44336;
            color: white;
        }
        
        .new-product-form {
            background-color: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        /* Bulk Import Section */
        .bulk-import-section {
            background-color: #e8f5e9;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            border: 2px dashed #4CAF50;
        }
        
        .bulk-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #c8e6c9;
            padding-bottom: 10px;
        }
        
        .bulk-tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            color: #666;
            transition: all 0.3s;
        }
        
        .bulk-tab-btn.active {
            color: #4CAF50;
            border-bottom-color: #4CAF50;
        }
        
        .bulk-tab-content {
            display: none;
        }
        
        .bulk-tab-content.active {
            display: block;
        }
        
        .csv-format {
            background-color: #f1f8e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 14px;
            border-left: 4px solid #4CAF50;
        }
        
        .bulk-textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 2px solid #c8e6c9;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .bulk-textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .file-upload {
            border: 2px dashed #4CAF50;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .file-upload:hover {
            background-color: #f1f8e9;
        }
        
        .file-upload input {
            display: none;
        }
        
        .file-upload-label {
            display: block;
            color: #4CAF50;
            font-weight: 500;
            font-size: 16px;
            cursor: pointer;
        }
        
        .file-upload-label i {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .preview-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .preview-table th, .preview-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .preview-table th {
            background-color: #4CAF50;
            color: white;
        }
        
        .preview-table tr:hover {
            background-color: #f9f9f9;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #e44d80;
        }
        
        /* Cart Page */
        .cart-container {
            background-color: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }
        
        .cart-items {
            margin-bottom: 30px;
        }
        
        .cart-item {
            display: flex;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
            gap: 20px;
        }
        
        .cart-item-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .cart-item-meta {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .cart-item-price {
            font-size: 18px;
            color: #e44d80;
            font-weight: bold;
        }
        
        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .remove-item {
            color: #f44336;
            cursor: pointer;
            font-weight: 500;
        }
        
        .cart-summary {
            background-color: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .total-row {
            font-size: 22px;
            font-weight: bold;
            color: #e44d80;
            border-bottom: none;
            margin-top: 10px;
        }
        
        .checkout-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            margin-top: 20px;
            transition: transform 0.3s;
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
        }
        
        /* Messages */
        .message {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }
        
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            color: #666;
            background-color: white;
            border-top: 1px solid #eee;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .product-detail-container {
                flex-direction: column;
            }
            
            .inventory-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container nav-container">
            <a href="#" class="logo" onclick="showTab('store')">
                <span class="logo-icon">üëö</span>
                <span>STYLEWEAR CLOTHING</span>
            </a>
            <div class="nav-links">
                <a href="#" class="nav-link active" onclick="showTab('store')">Store</a>
                <a href="#" class="nav-link" onclick="showTab('admin')">Admin Panel</a>
                <a href="#" class="nav-link" onclick="showTab('cart')">
                    <div class="cart-icon">
                        üõí
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </a>
            </div>
        </div>
    </header>
    
    <main class="container">
        <div class="content-tabs">
            <button class="tab-btn active" onclick="showTab('store')">Store</button>
            <button class="tab-btn" onclick="showTab('admin')">Admin Panel</button>
            <button class="tab-btn" onclick="showTab('cart')">Shopping Cart</button>
        </div>
        
        <!-- Store Tab -->
        <div id="storeTab" class="tab-content active">
            <div class="store-header">
                <h1 class="store-title">Our Collection</h1>
                <div class="inventory-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalProducts">0</div>
                        <div class="stat-label">Total Products</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="inStockProducts">0</div>
                        <div class="stat-label">In Stock</div>
                    </div>
                </div>
            </div>
            
            <div class="product-grid" id="productGrid">
                <!-- Products will be loaded here -->
            </div>
            
            <!-- Product Detail View (hidden by default) -->
            <div id="productDetailView" style="display: none;">
                <button onclick="showProductList()" style="background: none; border: none; color: #e44d80; font-size: 16px; margin-bottom: 20px; cursor: pointer;">
                    ‚Üê Back to Store
                </button>
                <div class="product-detail-container" id="productDetailContainer">
                    <!-- Product detail will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Admin Panel Tab -->
        <div id="adminTab" class="tab-content">
            <div class="admin-panel">
                <div class="admin-header">
                    <h2>Inventory Management</h2>
                    <div>
                        <button onclick="exportInventory()" class="save-btn">Export CSV</button>
                        <button onclick="showBulkImport()" class="bulk-btn">Bulk Import</button>
                    </div>
                </div>
                
                <div class="inventory-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="adminTotalProducts">0</div>
                        <div class="stat-label">Total Products</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="adminLowStock">0</div>
                        <div class="stat-label">Low Stock Items</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="adminOutOfStock">0</div>
                        <div class="stat-label">Out of Stock</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="adminTotalValue">$0</div>
                        <div class="stat-label">Inventory Value</div>
                    </div>
                </div>
                
                <table class="inventory-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Size</th>
                            <th>Stock</th>
                            <th>Price</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryTableBody">
                        <!-- Inventory rows will be loaded here -->
                    </tbody>
                </table>
                
                <!-- Bulk Import Section (Hidden by default) -->
                <div class="bulk-import-section" id="bulkImportSection" style="display: none;">
                    <h3>üì¶ Bulk Product Import</h3>
                    <p style="margin-bottom: 20px; color: #666;">Add multiple products at once using CSV format or text input</p>
                    
                    <div class="bulk-tabs">
                        <button class="bulk-tab-btn active" onclick="showBulkTab('csv')">CSV Upload</button>
                        <button class="bulk-tab-btn" onclick="showBulkTab('text')">Text Input</button>
                        <button class="bulk-tab-btn" onclick="showBulkTab('manual')">Manual Entry</button>
                    </div>
                    
                    <!-- CSV Upload Tab -->
                    <div id="csvTab" class="bulk-tab-content active">
                        <div class="csv-format">
                            <strong>CSV Format:</strong> Product Name, Price, Image URL, Sizes (comma separated), Stock per Size<br>
                            <strong>Example:</strong> "Classic T-Shirt", 24.99, "https://example.com/tshirt.jpg", "S,M,L,XL", 10
                        </div>
                        
                        <div class="file-upload" onclick="document.getElementById('csvFile').click()">
                            <input type="file" id="csvFile" accept=".csv" onchange="handleCSVUpload(event)">
                            <label class="file-upload-label">
                                <div>üìÅ Click to upload CSV file</div>
                                <div style="font-size: 14px; color: #666; margin-top: 5px;">or drag and drop</div>
                            </label>
                        </div>
                        
                        <div id="csvPreview" style="display: none;">
                            <h4>Preview (First 5 rows):</h4>
                            <table class="preview-table" id="csvPreviewTable">
                                <!-- CSV preview will be shown here -->
                            </table>
                            <button onclick="importFromCSV()" class="save-btn">Import Products</button>
                            <button onclick="clearCSVPreview()" class="delete-btn" style="margin-left: 10px;">Cancel</button>
                        </div>
                    </div>
                    
                    <!-- Text Input Tab -->
                    <div id="textTab" class="bulk-tab-content">
                        <div class="csv-format">
                            <strong>Format (one product per line):</strong><br>
                            Product Name, Price, Image URL, Sizes (comma separated), Stock per Size<br><br>
                            <strong>Example:</strong><br>
                            Classic T-Shirt, 24.99, https://example.com/tshirt.jpg, S,M,L,XL, 10<br>
                            Denim Jacket, 59.99, https://example.com/jacket.jpg, M,L,XL, 5
                        </div>
                        
                        <textarea class="bulk-textarea" id="bulkTextInput" placeholder="Enter your products here, one per line..."></textarea>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="loadSampleData()" class="bulk-btn">Load Sample Data</button>
                            <button onclick="previewBulkInput()" class="save-btn">Preview</button>
                        </div>
                        
                        <div id="textPreview" style="display: none; margin-top: 20px;">
                            <h4>Preview:</h4>
                            <table class="preview-table" id="textPreviewTable">
                                <!-- Text preview will be shown here -->
                            </table>
                            <button onclick="importFromText()" class="save-btn">Import Products</button>
                            <button onclick="clearTextPreview()" class="delete-btn" style="margin-left: 10px;">Cancel</button>
                        </div>
                    </div>
                    
                    <!-- Manual Entry Tab -->
                    <div id="manualTab" class="bulk-tab-content">
                        <div class="form-group">
                            <label for="bulkProductName">Product Name Pattern</label>
                            <input type="text" id="bulkProductName" class="form-control" placeholder="e.g., T-Shirt Color ">
                        </div>
                        
                        <div class="form-group">
                            <label for="bulkColors">Colors (comma separated)</label>
                            <input type="text" id="bulkColors" class="form-control" placeholder="e.g., Red,Blue,Green,Black,White">
                        </div>
                        
                        <div class="form-group">
                            <label for="bulkPrice">Price ($)</label>
                            <input type="number" id="bulkPrice" class="form-control" placeholder="24.99" step="0.01">
                        </div>
                        
                        <div class="form-group">
                            <label for="bulkSizes">Sizes (comma separated)</label>
                            <input type="text" id="bulkSizes" class="form-control" placeholder="S,M,L,XL">
                        </div>
                        
                        <div class="form-group">
                            <label for="bulkStock">Stock per Size/Color</label>
                            <input type="number" id="bulkStock" class="form-control" placeholder="10" value="10">
                        </div>
                        
                        <div class="form-group">
                            <label for="bulkImageBase">Base Image URL (use {color} as placeholder)</label>
                            <input type="text" id="bulkImageBase" class="form-control" placeholder="https://example.com/tshirt-{color}.jpg">
                        </div>
                        
                        <button onclick="generateBulkProducts()" class="save-btn">Generate Products</button>
                        
                        <div id="manualPreview" style="display: none; margin-top: 20px;">
                            <h4>Generated Products:</h4>
                            <table class="preview-table" id="manualPreviewTable">
                                <!-- Manual preview will be shown here -->
                            </table>
                            <button onclick="importManualProducts()" class="save-btn">Import Products</button>
                            <button onclick="clearManualPreview()" class="delete-btn" style="margin-left: 10px;">Cancel</button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #c8e6c9;">
                        <button onclick="hideBulkImport()" class="delete-btn">Close Bulk Import</button>
                    </div>
                </div>
                
                <!-- Regular Add Product Form -->
                <div class="new-product-form" id="regularProductForm">
                    <h3>Add Single Product</h3>
                    <div class="form-group">
                        <label for="newProductName">Product Name</label>
                        <input type="text" id="newProductName" class="form-control" placeholder="e.g., Classic T-Shirt">
                    </div>
                    <div class="form-group">
                        <label for="newProductPrice">Price ($)</label>
                        <input type="number" id="newProductPrice" class="form-control" placeholder="24.99" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="newProductImage">Image URL</label>
                        <input type="text" id="newProductImage" class="form-control" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label for="newProductSizes">Sizes (comma separated)</label>
                        <input type="text" id="newProductSizes" class="form-control" placeholder="S,M,L,XL">
                    </div>
                    <div class="form-group">
                        <label for="newProductStock">Initial Stock per Size</label>
                        <input type="number" id="newProductStock" class="form-control" placeholder="10" value="10">
                    </div>
                    <button onclick="addNewProduct()" class="save-btn">Add Product</button>
                </div>
            </div>
        </div>
        
        <!-- Shopping Cart Tab -->
        <div id="cartTab" class="tab-content">
            <div class="cart-container">
                <h2>Shopping Cart</h2>
                
                <div class="cart-items" id="cartItems">
                    <!-- Cart items will be loaded here -->
                    <div id="emptyCartMessage" style="text-align: center; padding: 40px; color: #666;">
                        Your cart is empty
                    </div>
                </div>
                
                <div class="cart-summary" id="cartSummary" style="display: none;">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="cartSubtotal">$0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Shipping:</span>
                        <span id="cartShipping">$5.99</span>
                    </div>
                    <div class="summary-row total-row">
                        <span>Total:</span>
                        <span id="cartTotal">$0.00</span>
                    </div>
                    <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
                </div>
            </div>
        </div>
        
        <!-- Messages Container -->
        <div id="messageContainer"></div>
    </main>
    
    <footer>
        <p>¬© 2023Goat Kids - Complete Inventory Management System with Bulk Import</p>
        <p style="margin-top: 10px; font-size: 14px; color: #888;">
            All inventory data is saved in your browser's local storage
        </p>
    </footer>

    <script>
        // ============================
        // DATA MANAGEMENT & STORAGE
        // ============================
        
        // Sample initial inventory data
        const initialInventory = {
            products: [
                {
                    id: 1,
                    name: "Classic White T-Shirt",
                    description: "Premium 100% cotton t-shirt, perfect for everyday wear. Soft, breathable, and comfortable.",
                    price: 24.99,
                    image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",
                    variants: [
                        { size: "S", stock: 15, lowStockThreshold: 5 },
                        { size: "M", stock: 8, lowStockThreshold: 5 },
                        { size: "L", stock: 3, lowStockThreshold: 5 },
                        { size: "XL", stock: 0, lowStockThreshold: 5 }
                    ]
                },
                {
                    id: 2,
                    name: "Denim Jacket",
                    description: "Vintage style denim jacket with modern fit. Perfect for casual outings.",
                    price: 59.99,
                    image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",
                    variants: [
                        { size: "S", stock: 5, lowStockThreshold: 3 },
                        { size: "M", stock: 12, lowStockThreshold: 3 },
                        { size: "L", stock: 7, lowStockThreshold: 3 },
                        { size: "XL", stock: 2, lowStockThreshold: 3 }
                    ]
                },
                {
                    id: 3,
                    name: "Black Hoodie",
                    description: "Warm and comfortable hoodie for cool days. Features front pocket and adjustable drawstring.",
                    price: 39.99,
                    image: "https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",
                    variants: [
                        { size: "S", stock: 10, lowStockThreshold: 4 },
                        { size: "M", stock: 20, lowStockThreshold: 4 },
                        { size: "L", stock: 15, lowStockThreshold: 4 },
                        { size: "XL", stock: 8, lowStockThreshold: 4 }
                    ]
                },
                {
                    id: 4,
                    name: "Summer Dress",
                    description: "Light and flowy summer dress with floral pattern. Perfect for warm days.",
                    price: 45.99,
                    image: "https://images.unsplash.com/photo-1567095761054-7a02e69e5c43?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",
                    variants: [
                        { size: "S", stock: 0, lowStockThreshold: 2 },
                        { size: "M", stock: 4, lowStockThreshold: 2 },
                        { size: "L", stock: 6, lowStockThreshold: 2 }
                    ]
                }
            ]
        };
        
        // Bulk import data
        let csvData = [];
        let textData = [];
        let manualData = [];
        
        // Load inventory from localStorage or use initial data
        let inventory = JSON.parse(localStorage.getItem('clothingInventory')) || initialInventory;
        let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
        
        // Save data to localStorage
        function saveInventory() {
            localStorage.setItem('clothingInventory', JSON.stringify(inventory));
            updateStats();
            renderStore();
            renderAdminPanel();
        }
        
        function saveCart() {
            localStorage.setItem('shoppingCart', JSON.stringify(cart));
            updateCartCount();
            renderCart();
        }
        
        // ============================
        // BULK IMPORT FUNCTIONS
        // ============================
        
        // Show bulk import section
        function showBulkImport() {
            document.getElementById('bulkImportSection').style.display = 'block';
            document.getElementById('regularProductForm').style.display = 'none';
            showBulkTab('csv'); // Default to CSV tab
        }
        
        // Hide bulk import section
        function hideBulkImport() {
            document.getElementById('bulkImportSection').style.display = 'none';
            document.getElementById('regularProductForm').style.display = 'block';
            clearAllPreviews();
        }
        
        // Show bulk tab
        function showBulkTab(tabName) {
            // Hide all bulk tabs
            document.querySelectorAll('.bulk-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Update tab buttons
            document.querySelectorAll('.bulk-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.bulk-tab-btn[onclick="showBulkTab('${tabName}')"]`).classList.add('active');
        }
        
        // Handle CSV file upload
        function handleCSVUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                parseCSV(content);
            };
            reader.readAsText(file);
        }
        
        // Parse CSV content
        function parseCSV(content) {
            csvData = [];
            const lines = content.split('\n');
            let headers = [];
            
            lines.forEach((line, index) => {
                // Skip empty lines
                if (!line.trim()) return;
                
                // Parse CSV line (handling quotes)
                const values = [];
                let inQuotes = false;
                let currentValue = '';
                
                for (let i = 0; i < line.length; i++) {
                    const char = line[i];
                    
                    if (char === '"') {
                        inQuotes = !inQuotes;
                    } else if (char === ',' && !inQuotes) {
                        values.push(currentValue.trim());
                        currentValue = '';
                    } else {
                        currentValue += char;
                    }
                }
                values.push(currentValue.trim());
                
                if (index === 0) {
                    headers = values;
                } else {
                    // Create product object from CSV row
                    if (values.length >= 5) {
                        const product = {
                            name: values[0],
                            price: parseFloat(values[1]) || 0,
                            image: values[2],
                            sizes: values[3].split(',').map(s => s.trim()),
                            stock: parseInt(values[4]) || 10
                        };
                        csvData.push(product);
                    }
                }
            });
            
            showCSVPreview();
        }
        
        // Show CSV preview
        function showCSVPreview() {
            const previewDiv = document.getElementById('csvPreview');
            const previewTable = document.getElementById('csvPreviewTable');
            
            if (csvData.length === 0) {
                showMessage('No valid products found in CSV', 'error');
                return;
            }
            
            // Build preview table
            let tableHTML = `
                <thead>
                    <tr>
                        <th>Product Name</th>
                        <th>Price</th>
                        <th>Sizes</th>
                        <th>Stock</th>
                    </tr>
                </thead>
                <tbody>
            `;
            
            // Show first 5 rows for preview
            csvData.slice(0, 5).forEach(product => {
                tableHTML += `
                    <tr>
                        <td>${product.name}</td>
                        <td>$${product.price.toFixed(2)}</td>
                        <td>${product.sizes.join(', ')}</td>
                        <td>${product.stock}</td>
                    </tr>
                `;
            });
            
            if (csvData.length > 5) {
                tableHTML += `
                    <tr>
                        <td colspan="4" style="text-align: center; font-style: italic;">
                            ... and ${csvData.length - 5} more products
                        </td>
                    </tr>
                `;
            }
            
            tableHTML += '</tbody>';
            previewTable.innerHTML = tableHTML;
            previewDiv.style.display = 'block';
            
            showMessage(`Found ${csvData.length} products in CSV`, 'info');
        }
        
        // Import products from CSV
        function importFromCSV() {
            if (csvData.length === 0) {
                showMessage('No products to import', 'error');
                return;
            }
            
            let addedCount = 0;
            let skippedCount = 0;
            
            csvData.forEach(productData => {
                // Check if product already exists
                const exists = inventory.products.some(p => 
                    p.name.toLowerCase() === productData.name.toLowerCase()
                );
                
                if (exists) {
                    skippedCount++;
                    return;
                }
                
                // Generate new ID
                const newId = inventory.products.length > 0 ? 
                    Math.max(...inventory.products.map(p => p.id)) + 1 : 1;
                
                // Create variants
                const variants = productData.sizes.map(size => ({
                    size: size,
                    stock: productData.stock,
                    lowStockThreshold: Math.min(5, Math.floor(productData.stock / 2))
                }));
                
                // Add new product
                inventory.products.push({
                    id: newId,
                    name: productData.name,
                    description: `Imported product: ${productData.name}`,
                    price: productData.price,
                    image: productData.image || "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",
                    variants: variants
                });
                
                addedCount++;
            });
            
            // Save and update
            saveInventory();
            clearCSVPreview();
            hideBulkImport();
            
            showMessage(`Imported ${addedCount} products, skipped ${skippedCount} duplicates`, 'success');
        }
        
        // Clear CSV preview
        function clearCSVPreview() {
            csvData = [];
            document.getElementById('csvPreview').style.display = 'none';
            document.getElementById('csvFile').value = '';
        }
        
        // Load sample data for text input
        function loadSampleData() {
            const sampleData = `Classic Red T-Shirt, 24.99, https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80, S,M,L,XL, 15
Blue Denim Jacket, 59.99, https://images.unsplash.com/photo-1551028719-00167b16eac5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80, M,L,XL, 8
Gray Hoodie, 39.99, https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80, S,M,L,XL, 12
Floral Summer Dress, 45.99, https://images.unsplash.com/photo-1567095761054-7a02e69e5c43?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80, S,M,L, 6`;
            
            document.getElementById('bulkTextInput').value = sampleData;
            showMessage('Sample data loaded. Click Preview to see results.', 'info');
        }
        
        // Preview bulk text input
        function previewBulkInput() {
            const text = document.getElementById('bulkTextInput').value;
            if (!text.trim()) {
                showMessage('Please enter some products', 'error');
                return;
            }
            
            textData = [];
            const lines = text.split('\n');
            
            lines.forEach(line => {
                line = line.trim();
                if (!line) return;
                
                // Parse line
                const parts = line.split(',').map(part => part.trim());
                
                if (parts.length >= 5) {
                    const product = {
                        name: parts[0],
                        price: parseFloat(parts[1]) || 0,
                        image: parts[2] || "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",
                        sizes: parts[3].split(',').map(s => s.trim()),
                        stock: parseInt(parts[4]) || 10
                    };
                    textData.push(product);
                }
            });
            
            if (textData.length === 0) {
                showMessage('No valid products found. Check your format.', 'error');
                return;
            }
            
            // Show preview
            const previewDiv = document.getElementById('textPreview');
            const previewTable = document.getElementById('textPreviewTable');
            
            let tableHTML = `
                <thead>
                    <tr>
                        <th>Product Name</th>
                        <th>Price</th>
                        <th>Sizes</th>
                        <th>Stock</th>
                    </tr>
                </thead>
                <tbody>
            `;
            
            textData.forEach(product => {
                tableHTML += `
                    <tr>
                        <td>${product.name}</td>
                        <td>$${product.price.toFixed(2)}</td>
                        <td>${product.sizes.join(', ')}</td>
                        <td>${product.stock}</td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody>';
            previewTable.innerHTML = tableHTML;
            previewDiv.style.display = 'block';
            
            showMessage(`Found ${textData.length} products`, 'info');
        }
        
        // Import from text input
        function importFromText() {
            if (textData.length === 0) {
                showMessage('No products to import', 'error');
                return;
            }
            
            let addedCount = 0;
            let skippedCount = 0;
            
            textData.forEach(productData => {
                // Check if product already exists
                const exists = inventory.products.some(p => 
                    p.name.toLowerCase() === productData.name.toLowerCase()
                );
                
                if (exists) {
                    skippedCount++;
                    return;
                }
                
                // Generate new ID
                const newId = inventory.products.length > 0 ? 
                    Math.max(...inventory.products.map(p => p.id)) + 1 : 1;
                
                // Create variants
                const variants = productData.sizes.map(size => ({
                    size: size,
                    stock: productData.stock,
                    lowStockThreshold: Math.min(5, Math.floor(productData.stock / 2))
                }));
                
                // Add new product
                inventory.products.push({
                    id: newId,
                    name: productData.name,
                    description: `Imported product: ${productData.name}`,
                    price: productData.price,
                    image: productData.image,
                    variants: variants
                });
                
                addedCount++;
            });
            
            // Save and update
            saveInventory();
            clearTextPreview();
            hideBulkImport();
            
            showMessage(`Imported ${addedCount} products, skipped ${skippedCount} duplicates`, 'success');
        }
        
        // Clear text preview
        function clearTextPreview() {
            textData = [];
            document.getElementById('textPreview').style.display = 'none';
            document.getElementById('bulkTextInput').value = '';
        }
        
        // Generate products from manual input
        function generateBulkProducts() {
            const namePattern = document.getElementById('bulkProductName').value.trim();
            const colors = document.getElementById('bulkColors').value.split(',').map(c => c.trim()).filter(c => c);
            const price = parseFloat(document.getElementById('bulkPrice').value) || 0;
            const sizes = document.getElementById('bulkSizes').value.split(',').map(s => s.trim()).filter(s => s);
            const stock = parseInt(document.getElementById('bulkStock').value) || 10;
            const imageBase = document.getElementById('bulkImageBase').value.trim();
            
            if (!namePattern || colors.length === 0 || !price || sizes.length === 0) {
                showMessage('Please fill in all required fields', 'error');
                return;
            }
            
            manualData = [];
            
            colors.forEach(color => {
                const productName = `${namePattern}${color}`;
                const productImage = imageBase.replace('{color}', color.toLowerCase()) || 
                    "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80";
                
                manualData.push({
                    name: productName,
                    price: price,
                    image: productImage,
                    sizes: sizes,
                    stock: stock
                });
            });
            
            // Show preview
            const previewDiv = document.getElementById('manualPreview');
            const previewTable = document.getElementById('manualPreviewTable');
            
            let tableHTML = `
                <thead>
                    <tr>
                        <th>Product Name</th>
                        <th>Price</th>
                        <th>Sizes</th>
                        <th>Stock</th>
                    </tr>
                </thead>
                <tbody>
            `;
            
            manualData.forEach(product => {
                tableHTML += `
                    <tr>
                        <td>${product.name}</td>
                        <td>$${product.price.toFixed(2)}</td>
                        <td>${product.sizes.join(', ')}</td>
                        <td>${product.stock}</td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody>';
            previewTable.innerHTML = tableHTML;
            previewDiv.style.display = 'block';
            
            showMessage(`Generated ${manualData.length} products`, 'info');
        }
        
        // Import manual products
        function importManualProducts() {
            if (manualData.length === 0) {
                showMessage('No products to import', 'error');
                return;
            }
            
            let addedCount = 0;
            let skippedCount = 0;
            
            manualData.forEach(productData => {
                // Check if product already exists
                const exists = inventory.products.some(p => 
                    p.name.toLowerCase() === productData.name.toLowerCase()
                );
                
                if (exists) {
                    skippedCount++;
                    return;
                }
                
                // Generate new ID
                const newId = inventory.products.length > 0 ? 
                    Math.max(...inventory.products.map(p => p.id)) + 1 : 1;
                
                // Create variants
                const variants = productData.sizes.map(size => ({
                    size: size,
                    stock: productData.stock,
                    lowStockThreshold: Math.min(5, Math.floor(productData.stock / 2))
                }));
                
                // Add new product
                inventory.products.push({
                    id: newId,
                    name: productData.name,
                    description: `Available in ${productData.sizes.join(', ')} sizes`,
                    price: productData.price,
                    image: productData.image,
                    variants: variants
                });
                
                addedCount++;
            });
            
            // Save and update
            saveInventory();
            clearManualPreview();
            hideBulkImport();
            
            showMessage(`Imported ${addedCount} products, skipped ${skippedCount} duplicates`, 'success');
        }
        
        // Clear manual preview
        function clearManualPreview() {
            manualData = [];
            document.getElementById('manualPreview').style.display = 'none';
            
            // Clear form fields
            document.getElementById('bulkProductName').value = '';
            document.getElementById('bulkColors').value = '';
            document.getElementById('bulkPrice').value = '';
            document.getElementById('bulkSizes').value = 'S,M,L,XL';
            document.getElementById('bulkStock').value = '10';
            document.getElementById('bulkImageBase').value = '';
        }
        
        // Clear all previews
        function clearAllPreviews() {
            clearCSVPreview();
            clearTextPreview();
            clearManualPreview();
        }
        
        // ============================
        // ORIGINAL FUNCTIONS (from previous code)
        // ============================
        
        // [All the original functions from the previous code remain here...]
        // Due to character limit, I'm showing that they should be included
        // These include: showProductList, showProductDetail, selectSize, etc.
        
        // Store functions
        function showProductList() {
            document.getElementById('productDetailView').style.display = 'none';
            document.getElementById('storeTab').querySelector('.store-header').style.display = 'flex';
            document.getElementById('productGrid').style.display = 'grid';
        }
        
        function showProductDetail(productId) {
            const product = inventory.products.find(p => p.id === productId);
            if (!product) return;
            
            document.getElementById('storeTab').querySelector('.store-header').style.display = 'none';
            document.getElementById('productGrid').style.display = 'none';
            
            const detailView = document.getElementById('productDetailView');
            detailView.style.display = 'block';
            
            let sizeButtons = '';
            product.variants.forEach(variant => {
                const isOutOfStock = variant.stock === 0;
                const isLowStock = variant.stock > 0 && variant.stock <= variant.lowStockThreshold;
                let stockClass = 'in-stock';
                let stockText = `${variant.stock} in stock`;
                
                if (isOutOfStock) {
                    stockClass = 'out-of-stock';
                    stockText = 'Out of stock';
                } else if (isLowStock) {
                    stockClass = 'low-stock';
                    stockText = `Only ${variant.stock} left`;
                }
                
                sizeButtons += `
                    <button class="size-btn ${isOutOfStock ? 'out-of-stock' : ''}" 
                            onclick="selectSize(${productId}, '${variant.size}')" 
                            ${isOutOfStock ? 'disabled' : ''}
                            id="sizeBtn_${productId}_${variant.size}">
                        ${variant.size}
                        <div style="font-size: 12px; margin-top: 5px;" class="${stockClass}">${stockText}</div>
                    </button>
                `;
            });
            
            const detailHTML = `
                <div class="product-detail-image">
                    <img src="${product.image}" alt="${product.name}">
                </div>
                <div class="product-detail-info">
                    <h1 class="product-title">${product.name}</h1>
                    <p class="product-price">$${product.price.toFixed(2)}</p>
                    <p>${product.description}</p>
                    
                    <div style="margin: 20px 0;">
                        <strong>Select Size:</strong>
                        <div class="size-buttons">
                            ${sizeButtons}
                        </div>
                    </div>
                    
                    <div class="quantity-controls">
                        <strong>Quantity:</strong>
                        <button class="qty-btn" onclick="changeQuantity(-1, ${productId})">-</button>
                        <input type="number" class="qty-input" id="quantity_${productId}" value="1" min="1" max="10">
                        <button class="qty-btn" onclick="changeQuantity(1, ${productId})">+</button>
                    </div>
                    
                    <button class="add-to-cart" id="addToCartBtn_${productId}" onclick="addToCartFromDetail(${productId})" disabled>
                        Add to Cart
                    </button>
                    <div id="message_${productId}" class="message"></div>
                </div>
            `;
            
            document.getElementById('productDetailContainer').innerHTML = detailHTML;
        }
        
        function selectSize(productId, size) {
            const product = inventory.products.find(p => p.id === productId);
            const variant = product.variants.find(v => v.size === size);
            
            product.variants.forEach(v => {
                const btn = document.getElementById(`sizeBtn_${productId}_${v.size}`);
                if (btn) {
                    btn.classList.remove('selected');
                }
            });
            
            const selectedBtn = document.getElementById(`sizeBtn_${productId}_${size}`);
            if (selectedBtn) {
                selectedBtn.classList.add('selected');
            }
            
            const addToCartBtn = document.getElementById(`addToCartBtn_${productId}`);
            if (variant.stock > 0) {
                addToCartBtn.disabled = false;
                document.getElementById(`quantity_${productId}`).max = Math.min(variant.stock, 10);
            } else {
                addToCartBtn.disabled = true;
            }
        }
        
        function changeQuantity(change, productId) {
            const input = document.getElementById(`quantity_${productId}`);
            let newValue = parseInt(input.value) + change;
            const product = inventory.products.find(p => p.id === productId);
            
            let selectedSize = null;
            product.variants.forEach(v => {
                const btn = document.getElementById(`sizeBtn_${productId}_${v.size}`);
                if (btn && btn.classList.contains('selected')) {
                    selectedSize = v.size;
                }
            });
            
            if (selectedSize) {
                const variant = product.variants.find(v => v.size === selectedSize);
                const maxQty = Math.min(variant.stock, 10);
                newValue = Math.max(1, Math.min(newValue, maxQty));
            } else {
                newValue = Math.max(1, newValue);
            }
            
            input.value = newValue;
        }
        
        function addToCartFromDetail(productId) {
            const product = inventory.products.find(p => p.id === productId);
            const quantity = parseInt(document.getElementById(`quantity_${productId}`).value);
            
            let selectedSize = null;
            product.variants.forEach(v => {
                const btn = document.getElementById(`sizeBtn_${productId}_${v.size}`);
                if (btn && btn.classList.contains('selected')) {
                    selectedSize = v.size;
                }
            });
            
            if (!selectedSize) {
                showMessage(`Please select a size for ${product.name}`, 'error', productId);
                return;
            }
            
            const variant = product.variants.find(v => v.size === selectedSize);
            
            if (quantity > variant.stock) {
                showMessage(`Only ${variant.stock} items available in size ${selectedSize}`, 'error', productId);
                return;
            }
            
            const existingItemIndex = cart.findIndex(item => 
                item.productId === productId && item.size === selectedSize
            );
            
            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity += quantity;
            } else {
                cart.push({
                    productId: productId,
                    name: product.name,
                    size: selectedSize,
                    price: product.price,
                    quantity: quantity,
                    image: product.image
                });
            }
            
            variant.stock -= quantity;
            
            saveInventory();
            saveCart();
            showMessage(`Added ${quantity} √ó ${product.name} (${selectedSize}) to cart!`, 'success', productId);
            
            showProductDetail(productId);
            
            setTimeout(() => {
                if (confirm('Item added to cart! View cart now?')) {
                    showTab('cart');
                }
            }, 1500);
        }
        
        function addToCart(productId, size) {
            const product = inventory.products.find(p => p.id === productId);
            const variant = product.variants.find(v => v.size === size);
            
            if (!variant || variant.stock === 0) {
                showMessage(`Size ${size} is out of stock`, 'error');
                return;
            }
            
            const existingItemIndex = cart.findIndex(item => 
                item.productId === productId && item.size === size
            );
            
            if (existingItemIndex > -1) {
                if (cart[existingItemIndex].quantity + 1 <= variant.stock) {
                    cart[existingItemIndex].quantity += 1;
                } else {
                    showMessage(`Only ${variant.stock} items available in size ${size}`, 'error');
                    return;
                }
            } else {
                cart.push({
                    productId: productId,
                    name: product.name,
                    size: size,
                    price: product.price,
                    quantity: 1,
                    image: product.image
                });
            }
            
            variant.stock -= 1;
            
            saveInventory();
            saveCart();
            showMessage(`Added ${product.name} (${size}) to cart!`, 'success');
        }
        
        // Admin functions
        function updateStock(productId, size, newStock) {
            const product = inventory.products.find(p => p.id === productId);
            const variant = product.variants.find(v => v.size === size);
            
            if (variant) {
                variant.stock = parseInt(newStock) || 0;
                saveInventory();
                showMessage(`Updated ${product.name} (${size}) stock to ${newStock}`, 'success');
            }
        }
        
        function addNewProduct() {
            const name = document.getElementById('newProductName').value.trim();
            const price = parseFloat(document.getElementById('newProductPrice').value);
            const image = document.getElementById('newProductImage').value.trim();
            const sizes = document.getElementById('newProductSizes').value.split(',').map(s => s.trim());
            const stock = parseInt(document.getElementById('newProductStock').value) || 10;
            
            if (!name || !price || !image || sizes.length === 0) {
                showMessage('Please fill in all fields', 'error');
                return;
            }
            
            const newId = inventory.products.length > 0 ? 
                Math.max(...inventory.products.map(p => p.id)) + 1 : 1;
            
            const variants = sizes.map(size => ({
                size: size,
                stock: stock,
                lowStockThreshold: 5
            }));
            
            inventory.products.push({
                id: newId,
                name: name,
                description: "A great new product!",
                price: price,
                image: image,
                variants: variants
            });
            
            saveInventory();
            showMessage(`Added new product: ${name}`, 'success');
            
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductImage').value = '';
            document.getElementById('newProductSizes').value = 'S,M,L,XL';
            document.getElementById('newProductStock').value = '10';
            
            showTab('store');
        }
        
        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product? This action cannot be undone.')) {
                inventory.products = inventory.products.filter(p => p.id !== productId);
                saveInventory();
                showMessage('Product deleted', 'success');
            }
        }
        
        function exportInventory() {
            let csv = 'Product,Size,Stock,Price,Status\n';
            
            inventory.products.forEach(product => {
                product.variants.forEach(variant => {
                    const status = variant.stock === 0 ? 'Out of Stock' : 
                                  variant.stock <= variant.lowStockThreshold ? 'Low Stock' : 'In Stock';
                    csv += `"${product.name}","${variant.size}",${variant.stock},${product.price},"${status}"\n`;
                });
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'inventory_' + new Date().toISOString().split('T')[0] + '.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showMessage('Inventory exported as CSV', 'success');
        }
        
        // Cart functions
        function updateCartQuantity(productId, size, change) {
            const itemIndex = cart.findIndex(item => 
                item.productId === productId && item.size === size
            );
            
            if (itemIndex === -1) return;
            
            const product = inventory.products.find(p => p.id === productId);
            const variant = product.variants.find(v => v.size === size);
            
            const newQuantity = cart[itemIndex].quantity + change;
            
            if (newQuantity < 1) {
                removeFromCart(productId, size);
                return;
            }
            
            if (newQuantity > variant.stock + cart[itemIndex].quantity) {
                showMessage(`Only ${variant.stock} additional items available`, 'error');
                return;
            }
            
            variant.stock -= change;
            cart[itemIndex].quantity = newQuantity;
            
            saveInventory();
            saveCart();
        }
        
        function removeFromCart(productId, size) {
            const itemIndex = cart.findIndex(item => 
                item.productId === productId && item.size === size
            );
            
            if (itemIndex === -1) return;
            
            const product = inventory.products.find(p => p.id === productId);
            const variant = product.variants.find(v => v.size === size);
            variant.stock += cart[itemIndex].quantity;
            
            cart.splice(itemIndex, 1);
            
            saveInventory();
            saveCart();
            showMessage('Item removed from cart', 'success');
        }
        
        function checkout() {
            if (cart.length === 0) {
                showMessage('Your cart is empty', 'error');
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) + 5.99;
            
            if (confirm(`Proceed with checkout? Total: $${total.toFixed(2)}`)) {
                showMessage('Order placed successfully! Thank you for your purchase.', 'success');
                
                cart = [];
                saveCart();
                
                renderStore();
            }
        }
        
        // UI rendering functions
        function renderStore() {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';
            
            inventory.products.forEach(product => {
                const totalStock = product.variants.reduce((sum, v) => sum + v.stock, 0);
                const hasStock = totalStock > 0;
                
                let sizeOptions = '';
                product.variants.forEach(variant => {
                    if (variant.stock > 0) {
                        sizeOptions += `
                            <button onclick="addToCart(${product.id}, '${variant.size}')" 
                                    style="padding: 5px 10px; margin: 2px; background: #f0f0f0; border: none; border-radius: 4px; cursor: pointer;">
                                ${variant.size}
                            </button>
                        `;
                    }
                });
                
                let stockClass = 'out-of-stock';
                let stockText = 'Out of stock';
                
                if (hasStock) {
                    const lowStockVariant = product.variants.find(v => 
                        v.stock > 0 && v.stock <= v.lowStockThreshold
                    );
                    
                    if (lowStockVariant) {
                        stockClass = 'low-stock';
                        stockText = 'Low stock';
                    } else {
                        stockClass = 'in-stock';
                        stockText = 'In stock';
                    }
                }
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-price">$${product.price.toFixed(2)}</p>
                        <div class="product-stock ${stockClass}">${stockText}</div>
                        <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
                            ${product.description.substring(0, 80)}...
                        </p>
                        <div style="margin-bottom: 15px;">
                            ${sizeOptions || '<span style="color: #999;">No sizes available</span>'}
                        </div>
                        <div class="product-actions">
                            <button class="view-btn" onclick="showProductDetail(${product.id})">
                                View Details
                            </button>
                            <button class="edit-btn" onclick="showTab('admin')">
                                Manage Stock
                            </button>
                        </div>
                    </div>
                `;
                
                productGrid.appendChild(productCard);
            });
            
            updateStats();
        }
        
        function renderAdminPanel() {
            const tableBody = document.getElementById('inventoryTableBody');
            tableBody.innerHTML = '';
            
            inventory.products.forEach(product => {
                product.variants.forEach(variant => {
                    const status = variant.stock === 0 ? 'Out of Stock' : 
                                  variant.stock <= variant.lowStockThreshold ? 'Low Stock' : 'In Stock';
                    const statusClass = variant.stock === 0 ? 'out-of-stock' : 
                                       variant.stock <= variant.lowStockThreshold ? 'low-stock' : 'in-stock';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${product.name}</td>
                        <td>${variant.size}</td>
                        <td>
                            <input type="number" class="stock-input" 
                                   value="${variant.stock}" 
                                   onchange="updateStock(${product.id}, '${variant.size}', this.value)">
                        </td>
                        <td>$${product.price.toFixed(2)}</td>
                        <td>
                            <span class="${statusClass}">${status}</span>
                        </td>
                        <td>
                            <button class="delete-btn" onclick="deleteProduct(${product.id})">
                                Delete
                            </button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            });
            
            updateAdminStats();
        }
        
        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const emptyCartMessage = document.getElementById('emptyCartMessage');
            const cartSummary = document.getElementById('cartSummary');
            
            if (cart.length === 0) {
                emptyCartMessage.style.display = 'block';
                cartSummary.style.display = 'none';
                cartItems.innerHTML = '';
                return;
            }
            
            emptyCartMessage.style.display = 'none';
            cartSummary.style.display = 'block';
            
            cartItems.innerHTML = '';
            
            let subtotal = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <div class="cart-item-title">${item.name}</div>
                        <div class="cart-item-meta">Size: ${item.size} | Quantity: ${item.quantity}</div>
                        <div class="cart-item-price">$${itemTotal.toFixed(2)}</div>
                    </div>
                    <div class="cart-item-actions">
                        <button onclick="updateCartQuantity(${item.productId}, '${item.size}', -1)" 
                                style="background: none; border: 1px solid #ddd; width: 30px; height: 30px; border-radius: 4px; cursor: pointer;">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateCartQuantity(${item.productId}, '${item.size}', 1)" 
                                style="background: none; border: 1px solid #ddd; width: 30px; height: 30px; border-radius: 4px; cursor: pointer;">+</button>
                        <span class="remove-item" onclick="removeFromCart(${item.productId}, '${item.size}')">Remove</span>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            const shipping = 5.99;
            const total = subtotal + shipping;
            
            document.getElementById('cartSubtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('cartShipping').textContent = `$${shipping.toFixed(2)}`;
            document.getElementById('cartTotal').textContent = `$${total.toFixed(2)}`;
        }
        
        function updateStats() {
            const totalProducts = inventory.products.length;
            const inStockProducts = inventory.products.filter(p => 
                p.variants.some(v => v.stock > 0)
            ).length;
            
            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('inStockProducts').textContent = inStockProducts;
        }
        
        function updateAdminStats() {
            let totalValue = 0;
            let lowStockCount = 0;
            let outOfStockCount = 0;
            
            inventory.products.forEach(product => {
                product.variants.forEach(variant => {
                    totalValue += variant.stock * product.price;
                    
                    if (variant.stock === 0) {
                        outOfStockCount++;
                    } else if (variant.stock <= variant.lowStockThreshold) {
                        lowStockCount++;
                    }
                });
            });
            
            document.getElementById('adminTotalProducts').textContent = inventory.products.length;
            document.getElementById('adminLowStock').textContent = lowStockCount;
            document.getElementById('adminOutOfStock').textContent = outOfStockCount;
            document.getElementById('adminTotalValue').textContent = `$${totalValue.toFixed(2)}`;
        }
        
        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }
        
        function showMessage(text, type, productId = null) {
            const messageContainer = document.getElementById('messageContainer');
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.textContent = text;
            messageDiv.style.display = 'block';
            
            messageContainer.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
            
            if (productId) {
                const productMessage = document.getElementById(`message_${productId}`);
                if (productMessage) {
                    productMessage.className = `message ${type}`;
                    productMessage.textContent = text;
                    productMessage.style.display = 'block';
                    
                    setTimeout(() => {
                        productMessage.style.display = 'none';
                    }, 3000);
                }
            }
        }
        
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.tab-btn[onclick="showTab('${tabName}')"]`).classList.add('active');
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`.nav-link[onclick="showTab('${tabName}')"]`).classList.add('active');
            
            if (tabName === 'store') {
                showProductList();
            }
        }
        
        // Initialize the application
        function init() {
            if (!localStorage.getItem('clothingInventory')) {
                saveInventory();
            }
            
            renderStore();
            renderAdminPanel();
            renderCart();
            updateCartCount();
            
            showTab('store');
            
            console.log('Inventory Management System with Bulk Import Loaded!');
            console.log('Products:', inventory.products.length);
            console.log('Cart items:', cart.length);
        }
        
        // Start the application when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
